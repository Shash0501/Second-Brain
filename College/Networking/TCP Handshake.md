![[Pasted image 20230829142450.png]]


### Can we avoid TCP handshake?

Problem
- One RTT is large amount of time for 'short lived' connection

Application Layer Solution
- Use persistent Connection feature of HTTP 1.1
	- Establishes a TCP connection only once for multiple HTTP requests to the same web server
- Common Lines in the HTTP header
	- Connection : Keep -Alive
	- Keep - Alive : Timeout = 5, max = 100

##### TFO (TCP Fast open)
![[Pasted image 20230829143112.png]]

Conditions for TFO
- Must not be a new connection
	- It works only for repeat connections because of the requirement of cookie
- Total amount of data piggybacked with the SYN packet must be within specified limits
- Only certain types of HTTP requests can be sent (GET)
![[Pasted image 20230829143407.png]]


The client and server let each other know that they support TFO (TCP Fast Open) using the TCP options field in the SYN packet. The TCP options field is a variable-length field that can be used to carry additional information that is not part of the standard TCP header.

The TFO option is a 4-byte option. The first byte is the option code, which is 34. The second byte is the length of the option, which is always 16 bytes. The third and fourth bytes are padding, which are always 0.

The TFO option contains a cookie that is generated by the client. The server can use the cookie to verify that the client supports TFO.

If the server supports TFO, it will respond with a SYN-ACK packet that includes the TFO option. The server will also generate its own cookie and include it in the TFO option.

If both the client and server support TFO, they will be able to use TFO to improve the performance of the connection.

Here are the steps on how the client and server let each other know that they support TFO:

1. The client sends a SYN packet with the TFO option.
2. The server responds with a SYN-ACK packet with the TFO option.
3. If both the client and server support TFO, they will be able to use TFO to improve the performance of the connection.

Here are some of the benefits of using TFO:

- It can reduce the number of round trips required to establish a connection.
- It can improve the performance of the connection by reducing the amount of data that needs to be sent.
- It can improve the reliability of the connection by reducing the risk of packet loss.

TFO is a relatively new technology, and it is not yet widely supported by all applications and operating systems. However, it is a promising technology that has the potential to improve the performance and reliability of TCP connections.